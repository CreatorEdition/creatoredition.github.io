<!DOCTYPE html>
<title>健康码出示</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<meta name="viewport" content="width=device-width,height=device-height,viewport-fit=cover,initial-scale=1,maximum-scale=1,user-scalable=0">
<meta name="theme-color" content="#FFFFFF">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<link rel="manifest" href="manifest.json">
<link rel="icon" type="image/png" href="./static/logo.png">
<link rel="apple-touch-icon" sizes="360x360" href="./static/logo.png">
<link rel="stylesheet" href="app.css">
<link rel="stylesheet" href="../common/nav.css">
<script src="../common/base.js"></script>

<view class="navbar navbar--wechat">
  <view class="navbar__placeholder"></view>
  <view class="navbar__inner" style="color: black; background: white;">
    <view class="navbar__left">
      <view class="navbar__buttons" onclick="history.back();">
        <view class="navbar__button-goback"></view>
      </view>
    </view>
    <view class="navbar__center">
      <text>核酸检测信息查询</text>
    </view>
    <view class="navbar__right">

    </view>
  </view>
</view>
<div class="capsule capsule--wechat" onclick="navigateHome();">
  <svg class="capsule__menu-icon" viewBox="0 0 64 28" xmlns="http://www.w3.org/2000/svg">
    <circle cx="32" cy="14" r="9.5"/>
    <circle cx="54" cy="14" r="6"/>
    <circle cx="10" cy="14" r="6"/>
  </svg>
  <div class="capsule__splitter"></div>
  <svg class="capsule__exit-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
    <circle cx="30" cy="30" r="9"/>
    <circle cx="30" cy="30" r="23" stroke-width="6" fill="transparent"/>
  </svg>
</div>
<!--
<div class="bg-detail green"></div>
-->
<img class="back-wrap" src="./static/bg.png">
<view class="bg detail-bg">
  <view class="sec-title">核酸检测信息 </view>
  <view class="qrcode detail-item" style="background-size: 98.667vw 115.067vw; background-repeat: no-repeat;">
    <!-- <view class="sy" style="display: none;">
      <image src="./static/sy.png"></image>
      <image src="./static/sy.png" style="position: relative;top: -2.133vw;left: -5.867vw"></image>
    </view> -->
    <view class="over-time" style="font-size: 6vw;"><span id="month"></span>月<span id="day"></span>日 <span id="time"></span></view>
    <view class="health-text"></text>
    </view>
    <view class="qr-info">
      <view style="position: relative;">
        <section id="masked">
          <span id="name-masked"></span>
          <view id="idcard-masked"></view>
          <image class="eye" src="./static/cleye.png" onclick="toggleMask(false);"></image>
        </section>
        <section id="unmasked" style="display: none;">
          <span id="name"></span>
          <view id="idcard"></view>
          <image class="eye" src="./static/opeye.png" onclick="toggleMask(true);"></image>
        </section>
      </view>
      <section id="checkin" style="display: none;">
        <view id="place-name"></view>
        <view id="place-address"></view>
      </section>
    </view>
  </view>
  <view class="card-menu">
    <view class="sec-title">核酸检测结果<span>刷新外省检测记录</span></view>

    <view class="member-list">
      <!-- -->
      <view class="member-item">
        <view class="preview g-preview" direction="row">
          <view class="leftImg"><img src="./static/l1.png"></view>
          <view class="preview-item time">
            <view class="preview-item__label">
              <text>检测时间：</text><text class="_test_datetime" data-traceback-hours="10" data-traceback-range="6"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测机构：</text><text class="test-institution"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测结果：阴性</text>
            </view>
          </view>

          <!-- <template is="t" data="{{item:item,key:'采样时间'}}" wx:if="{{type==='hesuan'&&item['采样时间']&&item['采样时间']!=item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测时间'}}" wx:if="{{type==='hesuan'&&item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测机构'}}"></template>
          <template is="t" data="{{item:item,key:'数据来源'}}"></template>
          <template is="t" data="{{item:item,key:'检测结果'}}"></template> -->
        </view>
      </view>
      <!-- -->
      <!-- -->
      <view class="member-item">
        <view class="preview g-preview" direction="row">
          <view class="leftImg"><img src="./static/l1.png"></view>
          <view class="preview-item time">
            <view class="preview-item__label">
              <text>检测时间：</text><text class="_test_datetime" data-traceback-hours="38" data-traceback-range="6"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测机构：</text><text class="test-institution"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测结果：阴性</text>
            </view>
          </view>

          <!-- <template is="t" data="{{item:item,key:'采样时间'}}" wx:if="{{type==='hesuan'&&item['采样时间']&&item['采样时间']!=item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测时间'}}" wx:if="{{type==='hesuan'&&item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测机构'}}"></template>
          <template is="t" data="{{item:item,key:'数据来源'}}"></template>
          <template is="t" data="{{item:item,key:'检测结果'}}"></template> -->
        </view>
      </view>
      <!-- -->
      <!-- -->
      <view class="member-item">
        <view class="preview g-preview" direction="row">
          <view class="leftImg"><img src="./static/l1.png"></view>
          <view class="rightImg"><img src="./static/48h.png"></view>
          <view class="preview-item time">
            <view class="preview-item__label">
              <text>检测时间：</text><text class="_test_datetime" data-traceback-hours="58" data-traceback-range="6"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测机构：</text><text class="test-institution"></text>
            </view>
          </view>
          <view class="preview-item">
            <view class="preview-item__label">
              <text>检测结果：阴性</text>
            </view>
          </view>

          <image class="icon-48" src="./static/48-h.png"></image>

          <!-- <template is="t" data="{{item:item,key:'采样时间'}}" wx:if="{{type==='hesuan'&&item['采样时间']&&item['采样时间']!=item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测时间'}}" wx:if="{{type==='hesuan'&&item['检测时间']}}"></template>
          <template is="t" data="{{item:item,key:'检测机构'}}"></template>
          <template is="t" data="{{item:item,key:'数据来源'}}"></template>
          <template is="t" data="{{item:item,key:'检测结果'}}"></template> -->
        </view>
      </view>
      <!-- -->
    </view>

  </view>
  <view class="other-menu green">
    <view bindtap="vaccineInfo" class="item">
      <view class="left">
        <view>疫苗接种查询</view>
      </view>
      <view class="more">
        <view class="result">已全程接种</view>
        <image class="more" src="./static/right.png"></image>
      </view>
    </view>
    <view bindtap="toPhoneList" class="item">
      <view class="left">
        <view>各地健康码服务热线</view>
      </view>
      <image class="more" src="./static/right.png"></image>
    </view>
  </view>
  <view class="tips">数据来源：国家政务服务平台、通信⼤数据⾏程卡、⼭东省公共管理机构</view>
</view>
<script>
  addStorageField("_name", "#name-masked", "名字", "李智能", presetFilters.lastcharonly);
  addStorageField("_name", "#name", "名字", "李智能");
  addStorageField("_idcard", "#idcard-masked", "身份证号", "110102199001016755", presetFilters.idcard(4, 2));
  addStorageField("_idcard", "#idcard", "身份证号", "110102199001016755");

  setDynamicTime("#month", 5, 7);
  setDynamicTime("#day", 8, 10);
  setDynamicTime("#time", 11, 19);

  setStaticTime("._test_datetime");

  addStorageField("_test_institution", ".test-institution", "检测机构", "青岛市第五人民医院");

  initServiceWorker("shandong-hc");
</script>